<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" as="style" crossorigin href="https://cdn.jsdelivr.net/gh/orioncactus/pretendard@v1.3.8/dist/web/static/pretendard-dynamic-subset.css" />
    <style>
        * {
    font-family: "Pretendard Variable", Pretendard, -apple-system, BlinkMacSystemFont, system-ui, Roboto, "Helvetica Neue", "Segoe UI", "Apple SD Gothic Neo", "Noto Sans KR", "Malgun Gothic", "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", sans-serif;
    box-sizing: border-box;
}

body {
    font-family: 'Noto Sans KR', sans-serif;
    background-color: #f0f4f8;
    color: #333;
    text-align: center;
    margin: 0;
    padding: 0;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    overflow: auto;
}

h1 {
    margin-bottom: 30px;
    font-size: 36px;
    color: #2D5FB4; /* ìƒˆë¡œìš´ ìƒ‰ìƒ ì ìš© */
    font-weight: bold;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2);
}

#back-button {
            position: absolute;
            top: 20px;
            left: 5px;
            padding: 5px 10px;
            font-size: 16px;
            border: none;
            background: none;
            color: #2D5FB4; /* ìƒˆë¡œìš´ ìƒ‰ìƒ ì ìš© */
            cursor: pointer;
            border-radius: 12px;
            font-weight: bold;
        }


.cuisine-buttons {
    margin-bottom: 20px;
}

.cuisine-buttons button {
    margin: 5px;
    padding: 12px 25px;
    font-size: 16px;
    border: none;
    border-radius: 25px;
    background-color: #2D5FB4; /* ìƒˆë¡œìš´ ìƒ‰ìƒ ì ìš© */
    color: white;
    cursor: pointer;
    transition: background-color 0.3s;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.cuisine-buttons button:hover {
    background-color: #1a3d6d; /* ì•½ê°„ ì–´ë‘ìš´ ìƒ‰ìƒìœ¼ë¡œ í˜¸ë²„ íš¨ê³¼ ì¶”ê°€ */
}

#roulette-container {
    position: relative;
    margin: 20px auto;
}

#roulette {
    width: 300px;
    height: 300px;
    border-radius: 50%;
    background-color: #fff;
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 50px;
    color: #2D5FB4;
    font-weight: bold;
    transition: transform 4s ease-out;
    border: 5px solid #ffffff;
    background-image: conic-gradient(
        #f3c4fb 0% 6.67%, 
        #fde1c9 6.67% 13.33%, 
        #fff9c4 13.33% 20%, 
        #d0f0c0 20% 26.67%, 
        #a3d8f4 26.67% 33.33%, 
        #a5c8f0 33.33% 40%, 
        #b3c9f0 40% 46.67%, 
        #d0b3f0 46.67% 53.33%, 
        #f3b3f0 53.33% 60%, 
        #ffcad4 60% 66.67%, 
        #ffe1c9 66.67% 73.33%, 
        #ffffcc 73.33% 80%, 
        #e2e1d5 80% 86.67%, 
        #d0e0db 86.67% 93.33%, 
        #c7e0db 93.33% 100%
    );
    text-align: center;
}

#spin-button {
    margin-top: 20px;
    padding: 12px 25px;
    background-color: #2D5FB4; /* ìƒˆë¡œìš´ ìƒ‰ìƒ ì ìš© */
    color: white;
    border: none;
    border-radius: 25px;
    font-size: 18px;
    cursor: pointer;
    box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
    transition: background-color 0.3s;
}

#spin-button:hover {
    background-color: #1a3d6d; /* ì•½ê°„ ì–´ë‘ìš´ ìƒ‰ìƒìœ¼ë¡œ í˜¸ë²„ íš¨ê³¼ ì¶”ê°€ */
}

#food-list {
    margin-top: 20px;
    max-width: 320px;
    text-align: left;
    padding: 15px;
    display: none;
    position: relative;
    z-index: 5;
    overflow: auto;
    max-height: 50vh;
    background-color: #ffffff;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    border-radius: 12px;
    border: 2px solid #2D5FB4; /* ìƒˆë¡œìš´ ìƒ‰ìƒ ì ìš© */
    margin-bottom: 20px;
}

#food-list ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
}

#food-list li {
    background-color: #fff;
    margin-bottom: 10px;
    padding: 15px;
    border-radius: 12px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
    font-size: 18px;
    cursor: pointer;
    transition: background-color 0.3s;
}

#food-list li:hover {
    background-color: #f1f1f1;
}

#confirmation {
    margin-top: 20px;
    display: none;
    font-size: 20px;
    color: #2D5FB4; /* ìƒˆë¡œìš´ ìƒ‰ìƒ ì ìš© */
    margin-top: -10px;
    font-weight: bold;
}

#confirmation p {
    margin: 0;
    font-size: 20px;
}

#confirmation button {
    margin: 0 10px;
    padding: 10px 20px;
    font-size: 16px;
    border: none;
    border-radius: 20px;
    background-color: #2D5FB4; /* ìƒˆë¡œìš´ ìƒ‰ìƒ ì ìš© */
    color: white;
    cursor: pointer;
    transition: background-color 0.3s;
}

#confirmation button:hover {
    background-color: #1a3d6d; /* ì•½ê°„ ì–´ë‘ìš´ ìƒ‰ìƒìœ¼ë¡œ í˜¸ë²„ íš¨ê³¼ ì¶”ê°€ */
}

.info {
    font-size: 14px;
    color: #555;
}

    </style>
</head>
<body>
    <h1>ğŸ•¹ï¸ë©”ë‰´ ì¶”ì²œ ë£°ë ›ğŸ•¹ï¸</h1>

    <button id="back-button" onclick="window.location.href='/map'">< ë’¤ë¡œê°€ê¸°</button>

    <div class="cuisine-buttons">
        <button onclick="selectCuisine('í•œì‹')">í•œì‹</button>
        <button onclick="selectCuisine('ì¤‘ì‹')">ì¤‘ì‹</button>
        <button onclick="selectCuisine('ì–‘ì‹')">ì–‘ì‹</button>
        <button onclick="selectCuisine('ì¼ì‹')">ì¼ì‹</button>
        <button onclick="selectCuisine('ê°„ë‹¨ì‹')">ê°„ë‹¨ì‹</button>
        <button onclick="selectCuisine('ë””ì €íŠ¸')">ë””ì €íŠ¸</button>
    </div>

    <div id="roulette-container">
        <div id="roulette">?</div>
        <button id="spin-button" onclick="spinRoulette()">ë£°ë › ëŒë¦¬ê¸°</button>
    </div>

    <div id="confirmation">
        <p>ë§›ì§‘ ì •ë³´ë“¤ì„ ë³´ì‹œê² ìŠµë‹ˆê¹Œ?</p>
        <button onclick="showFoodList()">ì˜ˆ</button>
        <button onclick="hideConfirmation()">ì•„ë‹ˆì˜¤</button>
    </div>

    <div id="food-list"></div>

    <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=ff690f2ea35628c29cb346f55fdf0d40&libraries=services"></script>
    <script>
        let selectedCuisine = '';
        let spinCount = 0; // ë£°ë › íšŒì „ íšŸìˆ˜ ì¶”ì 
        let foods = {
            'í•œì‹': ['ë¹„ë¹”ë°¥', 'ì°Œê°œ', 'ë¶ˆê³ ê¸°', 'ë‘ë¶€ê¹€ì¹˜', 'ëƒ‰ë©´', 'ì¹¼êµ­ìˆ˜', 'ì¡ì±„', 'ë‹­ê°ˆë¹„', 'ì‚¼ê²¹ì‚´', 'ì œìœ¡', 'êµ­ë°¥', 'ìƒ¤ë¸Œìƒ¤ë¸Œ', 'ì­ˆê¾¸ë¯¸', 'ë³´ìŒˆ', 'ì¹˜í‚¨'],
            'ì¤‘ì‹': ['ì§œì¥ë©´', 'ì§¬ë½•', 'íƒ•ìˆ˜ìœ¡', 'ë§ˆíŒŒë‘ë¶€', 'ë§Œë‘', 'ë§ˆë¼íƒ•', 'ë§ˆë¼ìƒ¹ê¶ˆ', 'ë§ˆë¼í› ê¶ˆ', 'ìœ ì‚°ìŠ¬', 'ë”¤ì„¬', 'ê¿”ë°”ë¡œìš°', 'ì¡ì±„ë°¥', 'ìš°ë™', 'ìŒ€íƒ•ë©´', 'ì–‘ê¼¬ì¹˜'],
            'ì–‘ì‹': ['ìŠ¤í…Œì´í¬', 'íŒŒìŠ¤íƒ€', 'í”¼ì', 'í–„ë²„ê±°', 'ìƒëŸ¬ë“œ', 'ë¦¬ì¡°ë˜', 'ì˜¤ë¯ˆë ›', 'ë¸ŒëŸ°ì¹˜', 'ê·¸ë¼íƒ•', 'ë¶€ë¦¬ë˜', 'ìŠ¤í”„', 'ìƒŒë“œìœ„ì¹˜', 'ì¹´ë ˆë¼ì´ìŠ¤', 'ìŠ¤íŒŒê²Œí‹°', 'ë¯¸íŠ¸ë³¼'],
            'ì¼ì‹': ['ì´ˆë°¥', 'ë¼ë©˜', 'ëˆì¹´ì¸ ', 'ìš°ë™', 'ë®ë°¥', 'ìƒì„ íšŒ', 'ê·œë™', 'ì¹´ë ˆë¼ì´ìŠ¤', 'ëª¨ë°€', 'ì†Œë°”', 'í…ë™', 'ê°€ì¸ ë™', 'íƒ€ì½”ì•¼í‚¤', 'ê°€ë¼ì•„ê²Œ', 'ëˆë¶€ë¦¬'],
            'ë””ì €íŠ¸': ['ì¼€ì´í¬', 'ë§ˆì¹´ë¡±', 'í¬ë¡œí”Œ', 'ë¹™ìˆ˜', 'ë„ë„›', 'ì¿ í‚¤', 'íƒ€ë¥´íŠ¸', 'ì•„ì´ìŠ¤í¬ë¦¼', 'í‘¸ë”©', 'ì „í†µì°¨', 'ë¸Œë¼ìš°ë‹ˆ', 'ì´ˆì½œë¦¿', 'ëª¨ë‚˜ì¹´', 'í¬ë ˆí˜', 'ì™€í”Œ'],
            'ê°„ë‹¨ì‹': ['í† ìŠ¤íŠ¸', 'ê¹€ë°¥', 'ìƒŒë“œìœ„ì¹˜', 'í–„ë²„ê±°', 'í•«ë„ê·¸', 'ë–¡ë³¶ì´', 'íŠ€ê¹€', 'ìˆœëŒ€', 'ë¼ë©´', 'ê°ìíŠ€ê¹€', 'í•«ë°”', 'ìƒëŸ¬ë“œ', 'ìƒŒë“œìœ„ì¹˜', 'ì»µë°¥', 'ì£½'],
        };

        const places = new kakao.maps.services.Places();

        function selectCuisine(cuisine) {
            selectedCuisine = cuisine;
            document.getElementById('food-list').innerHTML = '';
            document.getElementById('food-list').style.display = 'none';
            document.getElementById('roulette-container').style.display = 'block';
            document.getElementById('confirmation').style.display = 'none';
            document.getElementById('roulette').style.transform = 'rotate(0deg)';
            document.getElementById('roulette').innerText = '?';
        }

        function spinRoulette() {
            if (selectedCuisine === '') {
                alert('ë¨¼ì € ìŒì‹ì„ ì„ íƒí•´ì£¼ì„¸ìš”!');
                return;
            }

            // ë£°ë ›ê³¼ ê²€ìƒ‰ ê²°ê³¼ ì´ˆê¸°í™”
            document.getElementById('food-list').style.display = 'none';
            document.getElementById('confirmation').style.display = 'none';
            document.getElementById('roulette-container').style.display = 'block';

            spinCount++; // íšŒì „ íšŸìˆ˜ ì¦ê°€

            let foodOptions = foods[selectedCuisine];
            let randomIndex = Math.floor(Math.random() * foodOptions.length);
            let selectedFood = foodOptions[randomIndex];

            // í™€ìˆ˜ ë²ˆì§¸ëŠ” ì‹œê³„ ë°©í–¥, ì§ìˆ˜ ë²ˆì§¸ëŠ” ë°˜ì‹œê³„ ë°©í–¥ìœ¼ë¡œ íšŒì „
            let direction = spinCount % 2 === 0 ? -1 : 1;
            let randomDegree = direction * (Math.floor(Math.random() * 360) + 720);
            document.getElementById('roulette').style.transform = `rotate(${randomDegree}deg)`;

            setTimeout(() => {
                document.getElementById('roulette').innerText = selectedFood;
                document.getElementById('confirmation').style.display = 'block';
            }, 4000);
        }

        function showFoodList() {
            const selectedFood = document.getElementById('roulette').innerText;
            searchPlaces(selectedFood);
        }

        function hideConfirmation() {
            document.getElementById('confirmation').style.display = 'none';
        }

        function searchPlaces(keyword) {
            const query = `ë¶€ì‚°ëŒ€ ${keyword}`;
            places.keywordSearch(query, (data, status) => {
                if (status === kakao.maps.services.Status.OK) {
                    displayPlaces(data);
                } else {
                    console.error('ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ìƒíƒœ:', status);
                    document.getElementById('food-list').innerHTML = '<h3>ê²€ìƒ‰ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.</h3>';
                }
            });
        }

        function displayPlaces(places) {
            const foodListHTML = '<h3>ê²€ìƒ‰ ê²°ê³¼</h3><ul>' +
                places.map(place => 
                    `<li onclick="window.open('${place.place_url}', '_blank')" title="${place.place_name}">
                        <strong>${place.place_name}</strong><br>
                        ${place.address_name}<br>
                        <div class="info">
                            ì „í™”ë²ˆí˜¸: ${place.phone ? place.phone : 'ì •ë³´ ì—†ìŒ'}<br>
                            ì˜ì—…ì‹œê°„: ${place.opening_hours ? place.opening_hours : 'ì •ë³´ ì—†ìŒ'}
                        </div>
                    </li>`
                ).join('') + '</ul>';

            const foodListContainer = document.getElementById('food-list');
            foodListContainer.innerHTML = foodListHTML;
            foodListContainer.style.display = 'block';
            document.getElementById('confirmation').style.display = 'none';
            document.getElementById('roulette-container').style.display = 'none';
        }
    </script>
</body>
</html>
